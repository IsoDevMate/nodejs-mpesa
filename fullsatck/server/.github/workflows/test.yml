name: Nodejs Mpesa API
on:
   push:
        branches:
        - main
        - master
        
jobs:
  firebase-deploy:
    name: Deploy to Firebase
    runs-on: ubuntu-latest
    steps:
            - name: Checkout Repo
              uses: actions/checkout@master
            - name: Use Node.js 12.x 
              uses: actions/setup-node@v1
              with:
                 node-version: 12.x
            - run: npm ci        
            - name: Build
              run: npm run build
           # - name: Archive Production Artifact
           #  uses: actions/upload-artifact@master
           #   with:
           #     name: dist
           #     path: dist
            - uses: w9jds/firebase-action@master
              with:
                args: deploy --only hosting
              env:
                FIREBASE_TOKEN: ${{ secrets.FIREBASE_TOKEN }}
